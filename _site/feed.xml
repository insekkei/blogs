<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>webå‰ç«¯ç¬”è®°</title>
    <description>ç»¿è˜æ–°é†…é…’ï¼Œçº¢æ³¥å°ç«ç‚‰ã€‚&lt;br&gt;æ™šæ¥å¤©æ¬²é›ªï¼Œèƒ½é¥®ä¸€æ¯æ— ï¼Ÿ
</description>
    <link>http://localhost:4000/blogs/</link>
    <atom:link href="http://localhost:4000/blogs/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Fri, 09 Dec 2016 12:56:00 +0800</pubDate>
    <lastBuildDate>Fri, 09 Dec 2016 12:56:00 +0800</lastBuildDate>
    <generator>Jekyll v3.3.1</generator>
    
      <item>
        <title>expresså’Œwebpacké…åˆæ—¶å¯åŠ¨æ–‡ä»¶é…ç½®</title>
        <description>&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;é¡¹ç›®ç»“æ„ï¼šreact-redux-webpack-express-antui&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;clientä¸­å­˜æ”¾reactä»£ç ï¼Œåˆ†ä¸ºsrcå’Œbuildä¸¤ä¸ªç›®å½•&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;serverä¸­å­˜æ”¾expressä»£ç ï¼Œåˆ†ä¸ºsrcå’Œbuildä¸¤ä¸ªç›®å½•&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;clienté‡Œçš„ajaxè¯·æ±‚åŒ…è£…å½¢å¼ä¸ºï¼š/request.ajax?path=xxx&lt;!--more--&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;clientserver&quot;&gt;clienté‡Œè¯·æ±‚è·¯å¾„æ˜ å°„åˆ°serveré‡Œçš„æ–‡ä»¶ï¼š&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import _ from 'lodash';
import fs from 'fs';
import express from 'express';
import xml2js from 'xml2js';
import path from 'path';
import fetch from 'isomorphic-fetch';

import {SERVERCONFIG} from '../config';
const {nodeEnv, isMock, apiDir} = SERVERCONFIG;
const serverPath = '../' + apiDir.replace(/[\\\/]?$/, '/');
let router = express.Router();

function getLocalApi(req, res, apiPath, params) {
    // è·å–æ–‡ä»¶è·¯å¾„
    let file = path.resolve(__dirname, serverPath + apiPath + (isMock ? '-mock.js' : '.js'));

    // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨è¿”å›é”™è¯¯
    let isExist = fs.existsSync(file);
    if (!isExist) {
        return {errorCode: 500, message: 'error in server: invalid API path.', data: null};
    }

    // å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œè¿”å›è¯·æ±‚åˆ°çš„æ•°æ®
    let result = require(file);
    let resp = _.isPlainObject(result)
        ? new Promise(function (resolve) { resolve(result); })
        : result(req, res, apiPath, params);
    return resp;
}

router.all('/request.ajax*', function (req, res, next) {
    // è§£æå‡ºpath
    let body = req.body;
    let path = body.path || req.query.path;
    if (!path) {
        return res.json({errorCode: 500, message: 'error in server: empty API path.', data: null});
    }

    // è§£æå‡ºå‚æ•°
    let params = typeof body.params === 'string' ? JSON.parse(body.params) : body.params;

    // è·å–å¯¹åº”æ–‡ä»¶çš„æ•°æ®
    getLocalApi(req, res, path, params).then(function (result) {
        console.log('=================response result================');
        console.log(result);
        res.json(result);
    });

    // è®¾ç½®è¶…æ—¶
    // è®¾ç½®æ‰€æœ‰HTTPè¯·æ±‚çš„è¶…æ—¶æ—¶é—´
    req.setTimeout(20000);
    // è®¾ç½®æ‰€æœ‰HTTPè¯·æ±‚çš„æœåŠ¡å™¨å“åº”è¶…æ—¶æ—¶é—´
    res.setTimeout(20000);
});

export default router;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;express-&quot;&gt;express å¯åŠ¨æ–‡ä»¶é…ç½®&lt;/h2&gt;

&lt;p&gt;expressä½œä¸ºserveræ—¶ï¼Œwebpackåªéœ€è¦è´Ÿè´£ç¼–è¯‘å°±å¥½äº†ï¼Œè¾£ä¹ˆï¼Œå•é¡µåº”ç”¨ä¸­å¿…ç„¶ä¼šå‡ºç°åˆ·æ–°404çš„æƒ…å½¢ï¼Œæ€ä¹ˆç ´ï¼Ÿ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
 * @file express server
 * @author hancong05@baidu.com
 * @date 2016-10-29
 */

'use strict';

// éproductionç¯å¢ƒé‡Œå¯ä»¥ä½¿ç”¨express-sessionæ¥å­˜å‚¨ç”¨æˆ·åç­‰ä¿¡æ¯ï¼Œä½†ç”Ÿäº§ç¯å¢ƒä¸‹ä¸å…è®¸ï¼Œå¯ä»¥ç”¨cookie-sessionæˆ–è€…Redisä¹‹ç±»çš„æ–¹æ¡ˆä»£æ›¿å®ƒ
import cookieSession from 'cookie-session';
import express from 'express';
import path from 'path';
// expressæ¥æ”¶åˆ°æµè§ˆå™¨é‡Œä¼ è¿‡æ¥çš„çš„req.bodyä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨ï¼Œéœ€è¦è§£ææˆæ­£å¸¸çš„æ ¼å¼
import bodyParser from 'body-parser';
// ä¸“ä¸šè§£å†³å•é¡µåº”ç”¨åˆ·æ–°é—®é¢˜ï¼Œç±»ä¼¼webpack-history-api-callbackä»€ä¹ˆçš„
import fallback from 'express-history-api-fallback';

// ç™»å½•
import loginFilter from './router/loginFilter';
// é€€å‡ºç™»å½•
import logout from './router/logout';
// è¿™æ˜¯ä¸€ä¸ªå‰ç«¯è¯·æ±‚mapåç«¯jsæ–‡ä»¶çš„æ–¹æ³•ï¼ŒæŒ‰ç…§è·¯å¾„æ˜ å°„åˆ°express serverå±‚ä¸‹å¯¹åº”çš„æ–‡ä»¶é‡Œ
import apiMap from './router/apiMap';

import {SERVERCONFIG} from './config';
const {port, nodeEnv, postLimit} = SERVERCONFIG;

let app = express();

// use cookieSession
app.use(cookieSession({
    name: 'posterlab',
    keys: ['userName'],
    // 30 days
    maxAge: 30 * 24 * 60 * 60 * 1000
}));

// login router
app.use(loginFilter);
app.use(logout);
// static files
let root = path.resolve(__dirname, '../../client/build/');
app.use(express.static(root));

// SPA refresh 404 resolution
app.use(fallback('index.html', {root}));


// map request path to api file
app.use(bodyParser.urlencoded({limit: `${postLimit}MB`, extended: true}));
app.use(bodyParser.json({limit: `${postLimit}MB`}));
app.use(apiMap);

// server start
if (!module.parent) {
    app.listen(port, function () {
        console.log('\n Express app listening on port ' + port + '.');
    });
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;serverconfig&quot;&gt;SERVERCONFIGï¼š&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module.exports = {
    // app serverå¯åŠ¨é…ç½®
    SERVERCONFIG: {
        apiDir: 'api',
        // åç«¯æ¥å£host
        apiBackEndHost: {
            product: 'http://10.94.245.18:8888/ceres/launch/api',
            promote: 'http://10.94.245.18:8889/ceres/show/api',
            preview: 'http://10.94.245.18:8889/ceres/show/api'
        },
        // æ˜¯å¦mockï¼Œtrueæ—¶è¯·æ±‚${path}-mock.js
        isMock: 0,
        // app port
        port: process.env.NODE_ENV === 'production' ? 8080 : 8886,
        // å¼€å‘ï¼ç”Ÿäº§ç¯å¢ƒ
        nodeEnv: process.env.NODE_ENV || 'dev',
        // å•ä½ï¼šMB
        postLimit: 5
    },
    // UUAPé…ç½®
    UUAPCONFIG: {
        production: {
            protocol: 'https',
            hostname: 'uuap.baidu.com',
            validateMethod: '/serviceValidate',
            pathname: '/login',
            logoutMethod: '/logout',
            uicUrl: 'http://uuap.baidu.com:8086/ws/',
            appKey: 'uuapclient-5-1E1FF0L10eb2TthZmAcc'
        },
        dev: {
            protocol: 'http',
            hostname: 'itebeta.baidu.com',
            port: '8100',
            pathname: '/login',
            validateMethod: '/serviceValidate',
            logoutMethod: '/logout',
            uicUrl: 'http://itebeta.baidu.com:8102/ws/',
            appKey: 'UICWSTestKey'
        },
        API: {
            UserRemoteService: 'UserRemoteService?wsdl',
            EmailGroupRemoteService: 'EmailgroupRemoteService?wsdl'
        }
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;babelrc&quot;&gt;.babelrc&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;presets&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;es2015&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;stage-0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;plugins&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;import&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;style&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;libraryDirectory&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;lib&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;libraryName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;antd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;camel2DashComponentName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;packagejson&quot;&gt;æœ€å¤–å±‚package.jsonå‘½ä»¤ï¼š&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;scripts&quot;: {
    // æœåŠ¡å¯åŠ¨
    &quot;start&quot;: &quot;nodemon server/src/app.js --ignore client/ --exec babel-node&quot;,
    // clienté‡Œç¼–è¯‘
    &quot;build&quot;: &quot;webpack --watch --config client/webpack-dev-server.config.js&quot;,
    // clienté‡Œå‘å¸ƒ
    &quot;release&quot;: &quot;webpack --watch --config client/webpack-production.config.js&quot;,
    // serveré‡Œç¼–è¯‘
    &quot;buildServer&quot;: &quot;babel server/src -d server/build&quot;
},
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Fri, 09 Dec 2016 12:16:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/js/express/webpack/2016/12/09/webpack-react-redux-ant-express-common-router-config.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/js/express/webpack/2016/12/09/webpack-react-redux-ant-express-common-router-config.html</guid>
        
        
        <category>js</category>
        
        <category>express</category>
        
        <category>webpack</category>
        
      </item>
    
      <item>
        <title>charlesè·å–expressé‡Œçš„nodeè¯·æ±‚...</title>
        <description>&lt;p&gt;nodeä½œä¸ºä»£ç†å±‚è¯·æ±‚åç«¯æ¥å£æ—¶ï¼Œä¸€èˆ¬ä¼šå°è£…ä¸€ä¸ªå…¬å…±çš„è¯·æ±‚æ–¹æ³•ï¼Œé…ç½®å¥½hostç­‰ä¿¡æ¯ï¼Œç»Ÿä¸€å¤„ç†åç«¯å¼‚å¸¸æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·çš„è¯ï¼Œæµè§ˆå™¨é‡Œå°±ä¸èƒ½çœ‹åˆ°çœŸæ­£çš„apiè¯·æ±‚åœ°å€å’ŒåŸå§‹çš„è¿”å›æ•°æ®äº†ï¼Œè€Œåœ¨terminalé‡Œæ‰“å°ä¿¡æ¯æ—¶ï¼Œå¾€å¾€ä¼šè¢«å¤šé‡è¯·æ±‚çœ‹å¾—çœ¼èŠ±ç¼­ä¹±â€¦&lt;/p&gt;

&lt;p&gt;å› æ­¤éœ€è¦charlesæŠ“å–nodeé‡Œçš„è¯·æ±‚å’Œè¿”å›ã€‚&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;expressé‡Œå†™ä¸ªfetchæ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import fetch from 'isomorphic-fetch';
import tunnel from 'tunnel';
import {SERVERCONFIG} from '../config';
const nodeEnv = process.env.NODE_ENV || 'dev';
...
module.exports = {
    fetchData(req, res, apiPath, params, host) {
        let ext = {};
        params = params || {};

        if (_.isPlainObject(params)) {
            ext = {
                method: 'POST',
                credentials: 'same-origin',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(params)
            };
            // è®¾ç½®æœ¬åœ°è°ƒè¯•ä»£ç†ï¼Œç«¯å£8888
            if (nodeEnv === 'local') {
                ext.agent = tunnel.httpOverHttp({
                    proxy: {
                        host: 'localhost',
                        port: 8888
                    }
                });
            }
        }

        let apiBackEndHost = SERVERCONFIG.apiBackEndHost[host];

        return fetch(apiBackEndHost + apiPath, Object.assign({}, ext)).then(response =&amp;gt; {
            return response.json();
        }).catch(error =&amp;gt; {
            // ç»Ÿä¸€è®¾ç½®é”™è¯¯å¤„ç†
            return Promise.resolve({
                status: 505,
                msg: '',
                body: { // å­—æ®µæ²¡ç¡®å®š
                    error: error
                }
            });
        });
    }
};
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¼€å¯charlesï¼Œé…ç½®httpProxyä¸º8888ï¼Œæ‰§è¡Œï¼š&lt;/p&gt;

&lt;p&gt;NODE_ENV=local npm start&lt;/p&gt;

&lt;p&gt;å°±å¯ä»¥åœ¨charlesä¸­çœ‹åˆ°çœŸæ­£çš„åç«¯è¯·æ±‚å’Œè¿”å›äº†ï½&lt;/p&gt;

&lt;p&gt;å¼€äº†shadowSocksè¿™æ¶å°é£æœºæ€ä¹ˆåŠï¼Ÿåˆ«æ€•ï¼ŒSwitchyOmegaé‡Œé…ç½®Protocolä¸ºSOCKS5ï¼ŒServer 127.0.0.1ï¼Œport 1080ï¼Œ
ç„¶ååœ¨charlesçš„Proxiesé‡Œé€‰ä¸­Enable Socks proxyï¼Œè®¾ç½®ç«¯å£1080.&lt;/p&gt;

&lt;p&gt;å¤‡æ³¨ï¼šæ­¤æ—¶å¯ä»¥å‰å¾€mac-&amp;gt;system preference-&amp;gt;network-&amp;gt;advanced-&amp;gt;Proxiesä¸­æŸ¥çœ‹web Proxyä»€ä¹ˆçš„ï¼Œæ˜¯ä¸æ˜¯è¢«è®¾ç½®äº†ä»€ä¹ˆç«¯å£ï½ï½&lt;/p&gt;
</description>
        <pubDate>Fri, 09 Dec 2016 12:16:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/js/express/charles/2016/12/09/express-charles-get-request.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/js/express/charles/2016/12/09/express-charles-get-request.html</guid>
        
        
        <category>js</category>
        
        <category>express</category>
        
        <category>charles</category>
        
      </item>
    
      <item>
        <title>å›¾ç‰‡ä¸Šä¼ æ—¶å¯èƒ½é‡åˆ°çš„ä¸€äº›æƒ…å†µ...</title>
        <description>&lt;h2 id=&quot;component&quot;&gt;component&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;input type=&quot;file&quot; accept=&quot;image/png, image/jpeg, image/jpg&quot;
    title=&quot;&quot;
    onChange={this.handleReUpload} /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;section&quot;&gt;ç±»å‹ã€å¤§å°ï¼ˆä½“ç§¯ï¼‰&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;event.target.files[0]: {
	type, size
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶ä¹Ÿå¯ä»¥åŒæ—¶åœ¨expressé‡Œå¯¹ä¸Šä¼ æ–‡ä»¶å¤§å°è¿›è¡Œé™åˆ¶&lt;/p&gt;

&lt;h2 id=&quot;base64--more--&quot;&gt;å›¾ç‰‡è½¬æ¢æˆbase64&lt;!--more--&gt;&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;inputTypeFileChangeHandler = event =&amp;gt; {
    let me = this;
    let reader = new FileReader();
    // onload() å½“è¯»å–æ“ä½œæˆåŠŸå®Œæˆæ—¶è°ƒç”¨
    reader.onload = function () {
        // reader.result è¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹.è¿™ä¸ªå±æ€§åªåœ¨è¯»å–æ“ä½œå®Œæˆä¹‹åæ‰æœ‰æ•ˆ,å¹¶ä¸”æ•°æ®çš„æ ¼å¼å–å†³äºè¯»å–æ“ä½œæ˜¯ç”±å“ªä¸ªæ–¹æ³•å‘èµ·çš„
        me.setState({
            imageUrl: reader.result
        });
    }
    if (event.target.files[0]) {
        // readAsDataURL()å¼€å§‹è¯»å–æŒ‡å®šçš„Blobå¯¹è±¡æˆ–Fileå¯¹è±¡ä¸­çš„å†…å®¹
        reader.readAsDataURL(event.target.files[0]);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;base64&quot;&gt;é€šè¿‡base64ç¼–ç è·å–å›¾ç‰‡åŸå§‹å®½é«˜&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let image = new Image();
image.src = reader.result;
let {width, height} = image;
// æ ¡éªŒé€»è¾‘
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;inputonchange&quot;&gt;å…³äºä¸Šä¼ inputçš„onChangeäº‹ä»¶&lt;/h2&gt;

&lt;p&gt;è¿ç»­ä¸Šä¼ åŒä¸€å¼ å›¾ç‰‡æ—¶ï¼Œä¸ä¼šè§¦å‘onChangeäº‹ä»¶ï¼Œè§£å†³æ€è·¯ï¼šæ¯æ¬¡ä¸Šä¼ å®Œï¼Œå…ˆé”€æ¯ç»„ä»¶ï¼Œå†é‡æ–°renderä¸€ä¸ªç»„ä»¶â€¦&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader&quot;&gt;é˜…è¯»æ›´å¤š&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 09 Dec 2016 12:01:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/js/image/file/2016/12/09/image-upload-relative.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/js/image/file/2016/12/09/image-upload-relative.html</guid>
        
        
        <category>js</category>
        
        <category>image</category>
        
        <category>file</category>
        
      </item>
    
      <item>
        <title>jsä¸­çš„Dateå¦ç±»ä½¿ç”¨</title>
        <description>&lt;h2 id=&quot;section&quot;&gt;å¦‚ä½•è·å¾—æŸä¸ªæœˆçš„å¤©æ•°ï¼Ÿ&lt;/h2&gt;

&lt;p&gt;æ–¹æ³•ä¸€&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const EVERY_MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

function getDays(year, month) {
    if (month === 1 &amp;amp;&amp;amp; isLeap(year)) return 29;
    return EVERY_MONTH_DAYS[month];
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;!--more--&gt;
&lt;p&gt;æ–¹æ³•äºŒ&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å‘ç°ï¼Œnew Date()çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¯ä»¥å¤§äºæˆ‘ä»¬æ‰€çŸ¥çš„æ¯ä¸ªæœˆçš„æœ€åä¸€å¤©çš„çš„ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;new Date(2016, 0, 200) //Mon Jul 18 2016 00:00:00 GMT+0800 (CST)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;äºæ˜¯&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function getDays(year, month) {
    if (month === 1) return new Date(year, month, 29).getMonth() === 1 ? 29 : 28;
    return new Date(year, month, 31).getMonth() === month ? 31 : 30;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ–¹æ³•ä¸‰&lt;/p&gt;

&lt;p&gt;new Date()çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å°äº1çš„å€¼ä¼šæ€ä¹ˆæ ·äº†ï¼Œæ¯”å¦‚ä¼ 0ï¼Œæˆ‘ä»¬å°±è·å¾—äº†ä¸Šä¸ªæœˆçš„æœ€åä¸€å¤©ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;new Date(2016, 0, -200) //Sun Jun 14 2015 00:00:00 GMT+0800 (CST)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;äºæ˜¯&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function getDays(year, month) {
    return new Date(year, month + 1, 0).getDate();
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;javascript--y-m-d-his-&quot;&gt;JavaScript æ˜¾ç¤º Y-m-d H:i:s çš„æ—¥æœŸæ—¶é—´æ ¼å¼&lt;/h2&gt;

&lt;p&gt;æ–¹æ³•ä¸€&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;let date = new Date();
let result = [
    [
        date.getFullYear(),
        date.getMonth() + 1,
        date.getDate()
    ].join('-'),
    [
        date.getHours(),
        date.getMinutes(),
        date.getSeconds()
    ].join(':')
].join(' ').replace(/\b\d\b/g, '0$&amp;amp;');
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ–¹æ³•äºŒ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;new Date().toLocaleString('zh-CN', { hour12: false }) // &quot;2016/8/15 15:41:44&quot;
new Date().toLocaleString('zh-CN', { hour12: true }) // &quot;2016/8/15 ä¸‹åˆ3:42:06&quot;

var date = new Date();
var result = date.toLocaleString('zh-CN', { hour12: false })
    .replace(/\//g, '-').replace(/\b\d\b/g, '0$&amp;amp;');
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
</description>
        <pubDate>Thu, 28 Jul 2016 14:02:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/js/date/2016/07/28/date-others.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/js/date/2016/07/28/date-others.html</guid>
        
        
        <category>js</category>
        
        <category>Date</category>
        
      </item>
    
      <item>
        <title>nodejsä¸­ä½¿ç”¨socketå®Œæˆé•¿è¿æ¥</title>
        <description>
</description>
        <pubDate>Wed, 08 Jun 2016 10:37:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/nodejs/socket/2016/06/08/nodejs-socket.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/nodejs/socket/2016/06/08/nodejs-socket.html</guid>
        
        
        <category>nodejs</category>
        
        <category>socket</category>
        
      </item>
    
      <item>
        <title>reactå’Œcsså®ç°ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„textarea</title>
        <description>&lt;p&gt;textareaé»˜è®¤æœ‰æ»šåŠ¨æ¡ï¼Œè®¾ç½®height: autoæˆ–è€…å›ºå®šé«˜åº¦çš„è¯ï¼Œä¹¦å†™ä½“éªŒåˆä¸å¤Ÿå¥½ï¼›è‹¥ä½¿ç”¨divï¼Œè®¾ç½®contentEditableä¸ºtrueï¼Œå…¼å®¹èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”è¿™å®¶ä¼™å¤åˆ¶ç²˜è´´æ—¶å¸¦ç€æºæ ¼å¼ï¼Œä¸å¥½æ“ä½œã€‚
æ‰€ä»¥è¿˜æ˜¯æƒ³åŠæ³•ä½¿ç”¨textareaå§ã€‚&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;è€ƒè™‘æ–‡å­—æ¢è¡Œç­‰æƒ…å†µï¼Œè¿™é‡Œä½¿ç”¨ &amp;lt;pre&amp;gt; ç¬¦å·ï¼Œå°†textareaçš„å€¼åŒæ­¥åˆ° &amp;lt;pre&amp;gt; ä¸­ï¼Œé€šè¿‡è¿™ä¸ªçœ‹ä¸è§çš„ &amp;lt;pre&amp;gt; ç›’å­çš„é«˜åº¦è‡ªå¢é•¿ï¼Œæ’‘é«˜ autoHeight ï¼Œç„¶åè®¾ç½®textareaç»å¯¹å®šä½ï¼Œtopä¸º0ï¼Œè¦†ç›–&amp;lt;pre&amp;gt;çš„ä½ç½®ï¼Œä¸”é«˜åº¦æ’‘æ»¡ autoHeight ï¼ˆ100%ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;js:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;...
getInitialState() {
    return {
        text: 'reactå’Œcsså®ç°ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„textarea'
    }
},
changeText(e) {
    this.setState({
        text: e.target.value
    });
},
render() {
    return &amp;lt;div className=&quot;autoHeight&quot;&amp;gt;
        &amp;lt;pre&amp;gt;{this.state.text}&amp;lt;/pre&amp;gt;
        &amp;lt;textarea onChange={this.changeText}&amp;gt;&amp;lt;/textarea&amp;gt;
    &amp;lt;/div&amp;gt;;
}
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;css:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.autoHeight {
    position: relative;

    pre{
        display: block;
        visibility: hidden;
        min-height: 10em;
        padding: 6px 7px; /*éœ€è¦ä¸textareaä¿æŒä¸€è‡´*/
        white-space: pre-wrap;
        line-height: 1.7em;
    }

    textarea {
        resize: none;
        position: absolute;
        height: 100%;
        top: 0;
        line-height: 1.7em;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ç†è®ºä¸Šï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ç›®çš„äº†ï¼Œä½†æ€»æœ‰ç‚¹ç‘•ç–µâ€”â€”preå’Œtextareaçš„é«˜åº¦å¹¶éå®Œå…¨ç›¸ç­‰ï¼Œäºæ˜¯ï¼Œæˆ‘å°†preçš„visibilityå’Œtextareaçš„topæ³¨é‡Šæ‰ï¼Œå¯¹æ¯”ä¸¤ä¸ªåœ¨é¡µé¢ä¸Šçš„è¡¨ç°ï¼Œå‘ç°ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;pre æ¯æ®µè¯æ˜¯ä¸æ¢è¡Œçš„ï¼Œæ¨ªå‘ä¸€æ’‘åˆ°åº•ï¼Œç›¸å½“äºè®¾ç½®äº†white-space: no-wrapï¼›&lt;/li&gt;
  &lt;li&gt;pre æ¯ä¸€æ®µï¼ˆå³textareaä¸­çš„returnæ¢è¡Œï¼‰çš„æ®µè½é—´è·æ¯”è¾ƒå¤§ï¼ˆå…¶å®æ˜¯line-heightï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;textarea æœ‰é¢„ç½®çš„padding&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;äºæ˜¯æ”¹æˆï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pre{
    display: block;
    visibility: hidden;
    min-height: 10em;
    padding: 6px 7px; /*éœ€è¦ä¸textareaä¿æŒä¸€è‡´*/
    white-space: pre-wrap; /*æŒ‰ç…§textareaä¸­çš„å†…å®¹ï¼Œè¯¥æ¢è¡Œæ¢è¡Œ*/
    line-height: 1.7em; /*éœ€è¦ä¸textareaä¿æŒä¸€è‡´*/
}

textarea {
    resize: none;
    position: absolute;
    height: 100%;
    top: 0;
    line-height: 1.7em;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å®Œç¾ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯å†ä¸€æ¬¡æ‰“å¼€lofterå‡†å¤‡å†™ç‚¹å„¿ä»€ä¹ˆæ—¶ï¼Œé¡ºæ‰‹å®¡æŸ¥äº†ä¸€ä¸‹ç¼–è¾‘æ¡†ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;body contenteditable=&quot;true&quot; spellcheck=&quot;false&quot; style=&quot;min-height: 170px;&quot;&amp;gt;&amp;lt;/body&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;éš¾æ€ªå…¨å±å†™æ–‡ç« æ—¶å…‰æ ‡ç»å¸¸å°±å¤±è¸ªäº† (;Â´à¼àº¶Ğ”à¼àº¶`) â€¦&lt;/p&gt;

</description>
        <pubDate>Mon, 06 Jun 2016 15:21:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/js/react/css/2016/06/06/css-textarea-autoheight.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/js/react/css/2016/06/06/css-textarea-autoheight.html</guid>
        
        
        <category>js</category>
        
        <category>react</category>
        
        <category>css</category>
        
      </item>
    
      <item>
        <title>nodejsä¸­ä½¿ç”¨mongodb</title>
        <description>&lt;p&gt;éœ€æ±‚èƒŒæ™¯ï¼šçº¿ä¸Šå‡ºé—®é¢˜æ—¶å¯ä»¥æ‰¾å‡ºè¿‘æœŸæ•°æ®ç›¸å…³çš„æ“ä½œå†å²ï¼Œä½†æ—¥å¿—åªåœ¨å†…ç½‘è®¿é—®ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯å¯ä»¥æŠŠæ—¥å¿—ç›¸å…³çš„æ•°æ®ä¿å­˜åœ¨mongodbä¸­ã€‚&lt;/p&gt;

&lt;p&gt;yog2çš„æ¡†æ¶ä¸­ï¼Œåç«¯æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;server | - action/api/xx.es
         - lib/dataFetch.es..
         - model | - schema/appfilterlog.es
                   - appfilterlog.es
         - config.es
         - router.es
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;é¦–å…ˆå®šä¹‰è¡¨ç»“æ„ï¼Œmodel/schema/appfilterlog.esä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;'use strict';

import * as mongoose from 'mongoose';
let logSchema = mongoose.Schema({
    time: Date,
    operate: String,
    operator: String,
    requestData: String
});

let appfilterlog = mongoose.model('appfilterlog', logSchema, 'Appfilterlog');

export default appfilterlog;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å­˜å‚¨æ•°æ®çš„æ–¹æ³•ï¼Œåœ¨model/appfilterlog.esä¸­ï¼Œéœ€è¦ä¿å­˜æ—¶é—´ã€æ“ä½œï¼ˆå¢åŠ ï¼åˆ é™¤ï¼ä¿®æ”¹ï¼‰ã€æ“ä½œäººã€è¯·æ±‚æ•°æ®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;'use strict';

import appfilterlog from './schema/appfilterlog';

export  async function newLog (operate, operator, requestData) {
    appfilterlog.create({
        time: new Date(),
        operate: operate,
        operator: operator,
        requestData: requestData
    });
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨actionä¸­è°ƒç”¨å¢åŠ ï¼åˆ é™¤ï¼ä¿®æ”¹çš„å‚æ•°æ—¶ï¼Œä¹Ÿè°ƒç”¨newLogçš„æ–¹æ³•ï¼Œä¾‹å¦‚action/api/add.esä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import {newLog} from '../../../../../../model/appfilterlog';
...
newLog('add', user.email, JSON.stringify(req.query));
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Thu, 26 May 2016 16:37:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/nodejs/mongo/2016/05/26/mongoose-with-nodejs.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/nodejs/mongo/2016/05/26/mongoose-with-nodejs.html</guid>
        
        
        <category>nodejs</category>
        
        <category>mongo</category>
        
      </item>
    
      <item>
        <title>ä½¿ç”¨csså®Œæˆä¸€ä¸ªä¸‰ç»´ç«‹ä½“æ—‹è½¬ç›¸å†Œ</title>
        <description>&lt;p&gt;æœ¬ç¯‡ä¸»è¦é€šè¿‡è¿™ä¸ªå®è·µç»ƒä¹ transformåŠ3Dæ—‹è½¬ã€‚&lt;/p&gt;

&lt;p&gt;æµè§ˆå™¨ä¸­ï¼Œ3Dæ—‹è½¬æ—¶ï¼Œä¸»è¦çœ‹xè½´ã€yè½´ã€zè½´çš„æ–¹å‘ï¼Œæ—‹è½¬æ‰€ç»•çš„è½´æ˜¯ä¸€æ¡æ¨ªçº¿ï¼Œä¸ºxè½´æ—‹è½¬ï¼Œç«–çº¿ï¼Œä¸ºyè½´æ—‹è½¬ï¼Œxå’Œyè½´éƒ½åœ¨æ˜¾ç¤ºå™¨æ‰€åœ¨çš„å¹³é¢ä¸Šã€‚zè½´åˆ™å‚ç›´æ˜¾ç¤ºå™¨æ‰€åœ¨çš„å¹³é¢ã€‚&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;è¯´åˆ°3Dï¼Œå¿…é¡»æåˆ°çš„ä¸€ä¸ªè¯ï¼šé€è§†ï¼Œä¹Ÿå°±æ˜¯perspectiveï¼Œperspectiveå±æ€§å®šä¹‰3Då…ƒç´ è·è§†å›¾çš„è·ç¦»ï¼Œä»¥åƒç´ è®¡ï¼Œå®šä¹‰è§‚å¯Ÿè€…åœ¨zè½´ä¸Šä¸3Då…ƒç´ çš„è·ç¦»ï¼ˆæ²¿ç€zè½´ï¼Œä¸æµè§ˆå™¨æ‰€åœ¨é¢å‚ç›´ç€ï¼Œå‘å‰èµ°ï¼Œå‘åèµ°â€¦ï¼Œè¶Šå‘å‰ï¼Œå€¼è¶Šå°ï¼Œè¶Šâ€œé è¿‘â€3Då…ƒç´ ï¼Œé è¿‘åˆ°0æ—¶ï¼Œçœ‹ä¸è§äº†ï¼æ­¤åˆ»å…ƒç´ åœ¨ä½ è„‘åï¼è¶Šâ€œè¿œç¦»â€ï¼Œå€¼è¶Šå¤§ï¼Œå¤§åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œä¹Ÿçœ‹ä¸è§äº†ï¼æ­¤åˆ»å…ƒç´ å·²ç»åŒ–èº«ä¸ºä¸€ä¸ªç‚¹äº†â€¦ï¼‰ï¼Œä¸ä¹‹é…åˆçš„ä¸€ä¸ªå±æ€§å«åšperspective-originï¼Œä¸¤ä¸ªå€¼ï¼Œåˆ†åˆ«å®šä¹‰è§†è§’åœ¨xè½´åç¦»çš„è§’åº¦ï¼ˆä»å·¦è¾¹å‘å³ğŸ‘‰çœ‹ï¼Ÿä»æ­£å‰æ–¹çœ‹ï¼Ÿä»å³è¾¹å‘å·¦ğŸ‘ˆçœ‹ï¼Ÿï¼‰å’Œåœ¨yè½´åç¦»çš„è§’åº¦ï¼ˆä»ä¸Šè¾¹ğŸ‘‡ä¿¯è§†ï¼Ÿä»æ­£å‰æ–¹çœ‹ï¼Ÿä»ä¸‹è¾¹ğŸ‘†ä»°è§†ï¼Ÿï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;htmlä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div class=&quot;stage&quot;&amp;gt;
    &amp;lt;div class=&quot;wrapper&quot;&amp;gt;
        &amp;lt;img src=&quot;http://ww1.sinaimg.cn/large/854f1e58jw1exjhap4pg2j21jk1jku0x.jpg&quot;/&amp;gt;
        &amp;lt;img src=&quot;http://ww3.sinaimg.cn/thumb180/854f1e58jw1f3adtzqrgvj21j01j0x26.jpg&quot;/&amp;gt;
        &amp;lt;img src=&quot;http://tupian.aladd.net/2015/7/2748.jpg&quot;/&amp;gt;
        &amp;lt;img src=&quot;http://ww3.sinaimg.cn/bmiddle/89f08a15gw1f3nc7unjq4j20k00k0dhd.jpg&quot;/&amp;gt;
        &amp;lt;img src=&quot;http://tpic.home.news.cn/xhCloudNewsPic/xhpic1501/M04/0D/54/wKhTlFcr1i-EX9ZYAAAAAG2hseo834.jpg&quot;/&amp;gt;
        &amp;lt;img src=&quot;https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcT7Mf-EWjUIFy77lI2zj2bOyTEcF78SS_AYMo6PfFWzYDQsa_9HEg&quot;/&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;stageæ˜¯æ•´ä¸ª3Dæ—‹è½¬ç›¸å†Œçš„èˆå°ï¼Œwrapperæ˜¯ä¸€ç»„ç›¸å†Œçš„åŒ…è£…å…ƒç´ ã€‚&lt;/p&gt;

&lt;p&gt;cssä»£ç å¦‚ä¸‹ï¼Œstageéœ€è¦è®¾ç½®perspectiveï¼Œwrapperè¦å®šä¹‰transform-style: preserve-3dã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºimgï¼Œé¦–å…ˆé€šè¿‡absoluteè®©ä¸€ç»„å…ƒç´ é‡å èµ·æ¥ï¼Œç„¶ååˆ†åˆ«è®¾ç½®æ—‹è½¬è§’åº¦ï¼Œå…­å¼ å›¾ç‰‡ï¼Œè§’åº¦å‡åŒ€åˆ†å¸ƒçš„è¯ï¼Œæ¯ä¸ªåº”è¯¥ç›¸å·®60åº¦ï¼Œæ­¤æ—¶å…­ä¸ªå›¾ç‰‡ä»ç„¶é‡å åœ¨ä¸€èµ·ï¼Œåªæ˜¯å„è‡ªé¢å‘ä¸åŒçš„æ–¹ä½ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªé‡è¦çš„è®¾ç½®ï¼štranslateZã€‚&lt;/p&gt;

&lt;p&gt;å½“å…ƒç´ é¢å‘æµè§ˆå™¨ï¼ˆæ²¡æœ‰rotateXæˆ–è€…Yï¼‰æ—¶ï¼ŒtranslateZçš„è¿åŠ¨å‚ç›´äºæµè§ˆå™¨æ‰€åœ¨çš„å¹³é¢ï¼Œè€Œè®¾ç½®äº†æ—‹è½¬ä¹‹åï¼Œzè½´ä¼šåˆ†åˆ«å‚ç›´äºå„ä¸ªå…ƒç´ æ—‹è½¬ä¹‹åæ‰€åœ¨çš„å¹³é¢ï¼Œå› æ­¤ï¼Œå¯¹äºä¸åŒæ–¹å‘çš„imgï¼ŒtranslateZç›¸å½“äºè®©å®ƒä»¬åƒèŠ±å„¿å¼€æ”¾ä¸€æ ·ï¼Œæ‰‹æ‹‰æ‰‹ï¼ŒèƒŒå¯¹èƒŒï¼Œåˆ†æ•£å¼€æ¥ï½&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;style&amp;gt;
    .stage {
        perspective: 800px;
        position: relative;
        height: 400px;
    }
    .wrapper {
        transform-style: preserve-3d;
        height: inherit;
    }
    .wrapper img {
        position: absolute;
        width: 108px;
        height: 108px;
        padding: 10px;
        background: #eee;
        left: 200px;
    }
    .wrapper img:nth-child(1) { transform: rotateY(   0deg ) translateZ(150px); }
    .wrapper img:nth-child(2) { transform: rotateY(  60deg ) translateZ(150px); }
    .wrapper img:nth-child(3) { transform: rotateY( 120deg ) translateZ(150px); }
    .wrapper img:nth-child(4) { transform: rotateY( 180deg ) translateZ(150px); }
    .wrapper img:nth-child(5) { transform: rotateY( 240deg ) translateZ(150px); }
    .wrapper img:nth-child(6) { transform: rotateY( 300deg ) translateZ(150px); }

    @keyframes rotatehaha {
        0% {transform: rotateY(0deg);}
        16% {transform: rotateY(60deg);}
        32% {transform: rotateY(120deg);}
        48% {transform: rotateY(180deg);}
        64% {transform: rotateY(240deg);}
        80% {transform: rotateY(300deg);}
    }
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;overã€‚å¦‚æœè¦æ—‹è½¬æ•´ä¸ªç›¸å†Œï¼Œç»™wrapperå…ƒç´ åŠ ä¸Štransform: rotateY(${num}deg)å°±å¯ä»¥ã€‚è‡ªåŠ¨æ—‹è½¬çš„è¯ï¼Œå¯ä»¥å†™ä¸ªå°åŠ¨ç”»ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.wrapper {
    transform-style: preserve-3d;
    height: inherit;
    animation: rotatehaha 10s infinite;
}

@keyframes rotatehaha {
    0% {transform: rotateY(0deg);}
    16% {transform: rotateY(60deg);}
    32% {transform: rotateY(120deg);}
    48% {transform: rotateY(180deg);}
    64% {transform: rotateY(240deg);}
    80% {transform: rotateY(300deg);}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯¹äºä¸Šè¾¹è®¾ç½®çš„3Dç›¸å…³çš„å±æ€§ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å®¡æŸ¥å…ƒç´ ä¸­é€šè¿‡ä¸Šä¸‹é”®æ”¹å˜å€¼çš„å¤§å°ï¼Œæ„Ÿå—å…¨æ–¹ä½360åº¦çš„è§†è§’ï¼ŒåŠ æ·±ç†è§£â€¦&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.zhangxinxu.com/wordpress/2012/09/css3-3d-transform-perspective-animate-transition/&quot;&gt;é˜…è¯»æ›´å¤š&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 25 May 2016 10:41:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/css3/2016/05/25/%E4%BD%BF%E7%94%A8css%E5%AE%8C%E6%88%90%E4%B8%80%E4%B8%AA%E4%B8%89%E7%BB%B4%E7%AB%8B%E4%BD%93%E6%97%8B%E8%BD%AC%E7%9B%B8%E5%86%8C.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/css3/2016/05/25/%E4%BD%BF%E7%94%A8css%E5%AE%8C%E6%88%90%E4%B8%80%E4%B8%AA%E4%B8%89%E7%BB%B4%E7%AB%8B%E4%BD%93%E6%97%8B%E8%BD%AC%E7%9B%B8%E5%86%8C.html</guid>
        
        
        <category>css3</category>
        
      </item>
    
      <item>
        <title>react contextä¼ å€¼</title>
        <description>&lt;p&gt;ç”¨react-routerçš„æ—¶å€™ï¼Œå¸Œæœ›ç»™{this.props.children}è¿™ä¸ªç»„ä»¶ä¼ ä¸€ä¸ªlayouté‡Œçš„ç”¨æˆ·åâ€¦&lt;/p&gt;

&lt;p&gt;Layout.jsä¸­ï¼š&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const Layout = React.createClass({
    childContextTypes: {
        username: React.PropTypes.string
    },
    getChildContext() {
        return {
            username: this.state.username
        };
    },
    ...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å­ç»„ä»¶ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const DateRange = React.createClass({
    contextTypes: {
        username: React.PropTypes.string
    },

    ...
    render() {
        const { username } = this.context;
        return ...
    }
    ...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://facebook.github.io/react/docs/context.html&quot;&gt;æ›´å¤šå…³äºcontext&lt;/a&gt;
&lt;a href=&quot;http://facebook.github.io/react/docs/reusable-components.html&quot;&gt;æ›´å¤špropTypes&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 05 May 2016 17:40:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/react/context/2016/05/05/react-context.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/react/context/2016/05/05/react-context.html</guid>
        
        
        <category>react</category>
        
        <category>context</category>
        
      </item>
    
      <item>
        <title>echartsä¸­éœ€è¦ä¿æŒlegendçš„selectedçŠ¶æ€</title>
        <description>&lt;h1 id=&quot;section&quot;&gt;èƒŒæ™¯ï¼š&lt;/h1&gt;

&lt;p&gt;å›¾è¡¨éšç€æ—¶é—´â€œè‡ªåŠ¨æ›´æ–°â€æ—¶ï¼Œå‡å¦‚deSelectäº†æŸä¸€é¡¹æ•°æ®ï¼Œåœ¨ä¸‹æ¬¡æ•°æ®æ¥ä¸´ã€å›¾åˆ·æ–°æ—¶ï¼Œä¾ç„¶deSelectè¿™ä¸ªæ•°æ®é¡¹ã€‚&lt;/p&gt;

&lt;h1 id=&quot;section-1&quot;&gt;æ€è·¯ï¼š&lt;/h1&gt;

&lt;p&gt;åœ¨å…¬å…±çš„Chartç»„ä»¶ä¸­ï¼š
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;...
getInitialState() {
    return {
        selected: {}
    }
},
componentDidUpdate() {
    const el = this.getDOMNode();
    const myChart = echarts.init(el);

    const { selected } = this.state;
    // å¦‚æœæ²¡æœ‰æ”¹å˜selectçŠ¶æ€ï¼Œselectedå°†ä¸ºç©º
    const ifSelected = this.isEmpty(selected);

    if (ifSelected) {
        myChart.setOption(this.props['data-source']);
    }
    else {
        // æ‰‹åŠ¨è®¾ç½®legend.selected
        this.props['data-source'].legend.selected = selected;
        myChart.setOption(this.props['data-source']);
    }

    const _this = this;
    // echartsæ·»åŠ äº‹ä»¶ç›‘æµ‹
    myChart.on('legendselectchanged', function(obj) {
        var selected = obj.selected;
        var legend = obj.name;
        _this.setState({
            selected: selected
        });
    });
},
isEmpty(obj) {
Â Â Â Â for (var name in obj) {
Â Â Â Â Â Â Â Â return false;
Â Â Â Â }
Â Â Â Â return true;
},
...
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://echarts.baidu.com/api.html#events&quot;&gt;æ›´å¤šäº‹ä»¶API&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 19 Apr 2016 16:57:00 +0800</pubDate>
        <link>http://localhost:4000/blogs/react/js/echarts/2016/04/19/echarts-%E4%BF%AE%E6%94%B9legend%E7%9A%84select%E7%8A%B6%E6%80%81.html</link>
        <guid isPermaLink="true">http://localhost:4000/blogs/react/js/echarts/2016/04/19/echarts-%E4%BF%AE%E6%94%B9legend%E7%9A%84select%E7%8A%B6%E6%80%81.html</guid>
        
        
        <category>react</category>
        
        <category>js</category>
        
        <category>echarts</category>
        
      </item>
    
  </channel>
</rss>
